import{a4 as de,f,c as re,o as ce,S as l,U as c,V as _,W as t,k as s,X as o,u as g,G as d,Z as r,F as I,Y as V,a0 as b,_ as C,a7 as ue,B as x}from"./vendor-9e962977.js";import{_ as pe}from"./index-b9d63c8b.js";import{a0 as _e,S as me,Z as ve,$ as fe,r as ge,f as be,v as N,ac as ye,a9 as he,ad as je}from"./antd-3abeaf7b.js";const ke={class:"progress-container"},Ce={class:"page-header"},we={class:"header-actions"},xe={class:"stats-overview"},Ne={class:"stat-card submitted"},Me={class:"stat-icon"},Te={class:"stat-content"},Oe={class:"stat-number"},Re={class:"stat-card reviewing"},Pe={class:"stat-icon"},Se={class:"stat-content"},Ie={class:"stat-number"},Ve={class:"stat-card meeting"},$e={class:"stat-icon"},Ue={class:"stat-content"},ze={class:"stat-number"},Be={class:"stat-card completed"},De={class:"stat-icon"},qe={class:"stat-content"},Fe={class:"stat-number"},Ae={class:"progress-items"},Je=["onClick"],Le={class:"item-header"},Ee={class:"project-info"},We={class:"project-name"},Ze={class:"project-code"},Ge={class:"status-info"},Qe={class:"submit-time"},Xe={class:"item-progress"},Ye={class:"progress-text"},He={class:"item-timeline"},Ke={class:"timeline-content"},et={class:"timeline-title"},tt={class:"timeline-desc"},st={class:"timeline-time"},ot={class:"item-actions"},at={key:0,class:"empty-state"},it={key:0,class:"detail-content"},lt={key:0,class:"meeting-content"},nt={__name:"progress",setup(dt){const $=de(),n=f({projectName:"",status:void 0,dateRange:[]}),y=f({submitted:8,reviewing:3,meeting:2,completed:5}),h=f(!1),w=f(!1),p=f(null),U=f([{id:1,projectName:"智慧城市大数据平台建设项目",projectCode:"PROJ-2024-001",status:"meeting_scheduled",submitTime:"2024-01-15",expectedTime:"2024-03-20",timeline:[{id:1,title:"申请提交",description:"验收申请已提交",time:"2024-01-15 10:30",status:"completed"},{id:2,title:"材料审核",description:"材料审核通过",time:"2024-01-16 14:20",status:"completed"},{id:3,title:"会议安排",description:"验收会议已安排",time:"2024-01-18 09:15",status:"current"}],meetingInfo:{time:"2024-01-25 14:00",location:"会议室A-201",type:"现场会议",requirements:"请携带项目相关材料",contact:"张秘书 13800138000"},detailTimeline:[{id:1,title:"申请提交",description:"验收申请已成功提交，等待审核",time:"2024-01-15 10:30",status:"completed",operator:"系统自动"},{id:2,title:"材料审核",description:"材料审核通过，符合验收要求",time:"2024-01-16 14:20",status:"completed",operator:"张审核员",comments:"材料齐全，符合验收要求，同意进入验收程序。"},{id:3,title:"会议安排",description:"验收会议已安排，请按时参加",time:"2024-01-18 09:15",status:"current",operator:"李管理员",comments:"会议时间：2024-01-25 14:00，地点：会议室A-201"}]},{id:2,projectName:"区块链供应链金融平台",projectCode:"PROJ-2024-002",status:"under_review",submitTime:"2024-01-20",expectedTime:"2024-04-15",timeline:[{id:1,title:"申请提交",description:"验收申请已提交",time:"2024-01-20 15:45",status:"completed"},{id:2,title:"材料审核",description:"正在审核中",time:"2024-01-21 08:00",status:"current"}],detailTimeline:[{id:1,title:"申请提交",description:"验收申请已成功提交，等待审核",time:"2024-01-20 15:45",status:"completed",operator:"系统自动"},{id:2,title:"材料审核",description:"材料正在审核中，请耐心等待",time:"2024-01-21 08:00",status:"current",operator:"王审核员"}]},{id:3,projectName:"AI智能客服系统",projectCode:"PROJ-2024-003",status:"rejected",submitTime:"2024-01-18",expectedTime:"2024-03-30",timeline:[{id:1,title:"申请提交",description:"验收申请已提交",time:"2024-01-18 11:20",status:"completed"},{id:2,title:"材料审核",description:"材料审核不通过",time:"2024-01-19 16:30",status:"failed"}],detailTimeline:[{id:1,title:"申请提交",description:"验收申请已成功提交，等待审核",time:"2024-01-18 11:20",status:"completed",operator:"系统自动"},{id:2,title:"材料审核",description:"材料审核不通过，需要补充材料",time:"2024-01-19 16:30",status:"failed",operator:"李审核员",comments:"材料不完整，缺少财务决算报告和知识产权清单，请补充后重新提交。"}]}]),M=re(()=>{let a=U.value;return n.value.projectName&&(a=a.filter(e=>e.projectName.includes(n.value.projectName)||e.projectCode.includes(n.value.projectName))),n.value.status&&(a=a.filter(e=>e.status===n.value.status)),n.value.dateRange&&n.value.dateRange.length,a}),z=a=>({submitted:"blue",under_review:"orange",approved:"cyan",rejected:"red",meeting_scheduled:"geekblue",completed:"green"})[a]||"default",B=a=>({submitted:"已提交",under_review:"审核中",approved:"审核通过",rejected:"审核驳回",meeting_scheduled:"会议已安排",completed:"验收完成"})[a]||"未知",D=a=>({submitted:20,under_review:40,approved:60,rejected:30,meeting_scheduled:80,completed:100})[a]||0,q=a=>a==="rejected"?"exception":a==="completed"?"success":"active",F=a=>({submitted:"#1890ff",under_review:"#fa8c16",approved:"#13c2c2",rejected:"#ff4d4f",meeting_scheduled:"#2f54eb",completed:"#52c41a"})[a]||"#1890ff",A=a=>({submitted:"申请已提交，等待管理员审核",under_review:"材料正在审核中",approved:"材料审核通过，等待安排验收会议",rejected:"材料审核未通过，需要重新提交",meeting_scheduled:"验收会议已安排，请按时参加",completed:"验收流程已完成"})[a]||"未知状态",J=a=>({done:"green",doing:"blue",pending:"gray",error:"red"})[a]||"blue",L=a=>({done:ye,doing:N,pending:N,error:he,warning:je})[a]||N,E=()=>{},W=()=>{n.value={projectName:"",status:void 0,dateRange:[]}},Z=()=>{},G=a=>{p.value=a,h.value=!0},Q=a=>{p.value=a,h.value=!0},X=a=>{$.push({path:"/acceptance/applicant/submit",query:{resubmit:"true",id:a.id}})},Y=a=>{p.value=a,w.value=!0};return ce(()=>{}),(a,e)=>{var P,S;const m=l("a-button"),H=l("a-input"),j=l("a-form-item"),v=l("a-select-option"),K=l("a-select"),ee=l("a-range-picker"),T=l("a-space"),te=l("a-form"),O=l("a-card"),k=l("a-col"),se=l("a-row"),oe=l("a-tag"),ae=l("a-progress"),ie=l("a-timeline-item"),le=l("a-timeline"),ne=l("a-empty"),R=l("a-modal");return c(),_("div",ke,[t("div",Ce,[e[6]||(e[6]=t("div",{class:"header-content"},[t("h1",{class:"page-title"},"验收进度查询"),t("p",{class:"page-description"},"查询和跟踪您的项目验收申请进度")],-1)),t("div",we,[s(m,{type:"primary",onClick:Z},{default:o(()=>[s(g(_e)),e[5]||(e[5]=d(" 刷新数据 ",-1))]),_:1,__:[5]})])]),s(O,{bordered:!1,class:"query-card",title:"查询条件"},{default:o(()=>[s(te,{layout:"inline",model:n.value,onFinish:E},{default:o(()=>[s(j,{label:"项目名称",name:"projectName"},{default:o(()=>[s(H,{value:n.value.projectName,"onUpdate:value":e[0]||(e[0]=i=>n.value.projectName=i),placeholder:"请输入项目名称","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),s(j,{label:"申请状态",name:"status"},{default:o(()=>[s(K,{value:n.value.status,"onUpdate:value":e[1]||(e[1]=i=>n.value.status=i),placeholder:"请选择状态","allow-clear":"",style:{width:"150px"}},{default:o(()=>[s(v,{value:"submitted"},{default:o(()=>e[7]||(e[7]=[d("已提交",-1)])),_:1,__:[7]}),s(v,{value:"under_review"},{default:o(()=>e[8]||(e[8]=[d("审核中",-1)])),_:1,__:[8]}),s(v,{value:"approved"},{default:o(()=>e[9]||(e[9]=[d("审核通过",-1)])),_:1,__:[9]}),s(v,{value:"rejected"},{default:o(()=>e[10]||(e[10]=[d("审核驳回",-1)])),_:1,__:[10]}),s(v,{value:"meeting_scheduled"},{default:o(()=>e[11]||(e[11]=[d("会议已定",-1)])),_:1,__:[11]}),s(v,{value:"completed"},{default:o(()=>e[12]||(e[12]=[d("验收完成",-1)])),_:1,__:[12]})]),_:1},8,["value"])]),_:1}),s(j,{label:"提交时间",name:"dateRange"},{default:o(()=>[s(ee,{value:n.value.dateRange,"onUpdate:value":e[2]||(e[2]=i=>n.value.dateRange=i),style:{width:"240px"}},null,8,["value"])]),_:1}),s(j,null,{default:o(()=>[s(T,null,{default:o(()=>[s(m,{type:"primary","html-type":"submit"},{default:o(()=>[s(g(me)),e[13]||(e[13]=d(" 查询 ",-1))]),_:1,__:[13]}),s(m,{onClick:W},{default:o(()=>e[14]||(e[14]=[d(" 重置 ",-1)])),_:1,__:[14]})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t("div",xe,[s(se,{gutter:24},{default:o(()=>[s(k,{xs:24,sm:12,lg:6},{default:o(()=>[t("div",Ne,[t("div",Me,[s(g(ve))]),t("div",Te,[t("div",Oe,r(y.value.submitted),1),e[15]||(e[15]=t("div",{class:"stat-label"},"已提交申请",-1))])])]),_:1}),s(k,{xs:24,sm:12,lg:6},{default:o(()=>[t("div",Re,[t("div",Pe,[s(g(fe))]),t("div",Se,[t("div",Ie,r(y.value.reviewing),1),e[16]||(e[16]=t("div",{class:"stat-label"},"审核中",-1))])])]),_:1}),s(k,{xs:24,sm:12,lg:6},{default:o(()=>[t("div",Ve,[t("div",$e,[s(g(ge))]),t("div",Ue,[t("div",ze,r(y.value.meeting),1),e[17]||(e[17]=t("div",{class:"stat-label"},"待会议",-1))])])]),_:1}),s(k,{xs:24,sm:12,lg:6},{default:o(()=>[t("div",Be,[t("div",De,[s(g(be))]),t("div",qe,[t("div",Fe,r(y.value.completed),1),e[18]||(e[18]=t("div",{class:"stat-label"},"已完成",-1))])])]),_:1})]),_:1})]),s(O,{bordered:!1,title:"验收进度列表"},{default:o(()=>[t("div",Ae,[(c(!0),_(I,null,V(M.value,i=>(c(),_("div",{key:i.id,class:"progress-item",onClick:u=>G(i)},[t("div",Le,[t("div",Ee,[t("h4",We,r(i.projectName),1),t("span",Ze,r(i.projectCode),1)]),t("div",Ge,[s(oe,{color:z(i.status),class:"status-tag"},{default:o(()=>[d(r(B(i.status)),1)]),_:2},1032,["color"]),t("span",Qe,r(i.submitTime),1)])]),t("div",Xe,[s(ae,{percent:D(i.status),status:q(i.status),"stroke-color":F(i.status),size:"small"},null,8,["percent","status","stroke-color"]),t("div",Ye,r(A(i.status)),1)]),t("div",He,[s(le,{size:"small"},{default:o(()=>[(c(!0),_(I,null,V(i.timeline,u=>(c(),C(ie,{key:u.id,color:J(u.status)},{dot:o(()=>[(c(),C(ue(L(u.status))))]),default:o(()=>[t("div",Ke,[t("div",et,r(u.title),1),t("div",tt,r(u.description),1),t("div",st,r(u.time),1)])]),_:2},1032,["color"]))),128))]),_:2},1024)]),t("div",ot,[s(T,null,{default:o(()=>[s(m,{size:"small",onClick:x(u=>Q(i),["stop"])},{default:o(()=>e[19]||(e[19]=[d(" 查看详情 ",-1)])),_:2,__:[19]},1032,["onClick"]),i.status==="rejected"?(c(),C(m,{key:0,type:"primary",size:"small",onClick:x(u=>X(i),["stop"])},{default:o(()=>e[20]||(e[20]=[d(" 重新提交 ",-1)])),_:2,__:[20]},1032,["onClick"])):b("",!0),i.status==="meeting_scheduled"?(c(),C(m,{key:1,type:"primary",size:"small",onClick:x(u=>Y(i),["stop"])},{default:o(()=>e[21]||(e[21]=[d(" 查看会议安排 ",-1)])),_:2,__:[21]},1032,["onClick"])):b("",!0)]),_:2},1024)])],8,Je))),128)),M.value.length===0?(c(),_("div",at,[s(ne,{description:"暂无符合条件的验收申请记录"})])):b("",!0)])]),_:1}),s(R,{visible:h.value,"onUpdate:visible":e[3]||(e[3]=i=>h.value=i),title:`${((P=p.value)==null?void 0:P.projectName)||""} - 验收详情`,width:"800px",footer:null},{default:o(()=>[p.value?(c(),_("div",it)):b("",!0)]),_:1},8,["visible","title"]),s(R,{visible:w.value,"onUpdate:visible":e[4]||(e[4]=i=>w.value=i),title:`${((S=p.value)==null?void 0:S.projectName)||""} - 会议安排`,width:"600px",footer:null},{default:o(()=>[p.value&&p.value.meetingInfo?(c(),_("div",lt)):b("",!0)]),_:1},8,["visible","title"])])}}},pt=pe(nt,[["__scopeId","data-v-c8b37508"]]);export{pt as default};
