import{a4 as le,c as S,f as T,o as de,S as r,U as c,V as I,W as s,k as n,X as i,u as k,Z as m,G as o,m as pe,A as re,_ as C,a0 as b,F as ue,Y as ce,l as d}from"./vendor-e4b530e5.js";import{_ as me}from"./index-053c0381.js";import{K as _e,F as ge,E as ve,r as fe,v as ke,f as Ce,z as ye,Q as je,O as be,W as U,m as $}from"./antd-19bac614.js";const we={class:"applicant-manage-container"},xe={class:"page-header"},he={class:"header-actions"},Re={class:"stats-overview"},Te={class:"stats-flex-container"},Ie={class:"stat-icon"},ze={class:"stat-content"},Ne={class:"stat-number"},$e={class:"stat-icon"},Oe={class:"stat-content"},Pe={class:"stat-number"},Me={class:"stat-icon"},Se={class:"stat-content"},Ue={class:"stat-number"},qe={class:"stat-icon"},Fe={class:"stat-content"},Je={class:"stat-number"},Ae={class:"stat-icon"},De={class:"stat-content"},Ve={class:"stat-number"},Be={class:"stat-icon"},Le={class:"stat-content"},Ee={class:"stat-number"},Ge={class:"stat-icon"},Qe={class:"stat-content"},We={class:"stat-number"},Ke={class:"flow-content"},Xe={class:"step-description"},Ye={class:"step-status-tags"},Ze={class:"step-description"},He={class:"step-status-tags"},et={class:"step-description"},tt={class:"step-status-tags"},st={class:"card-title-with-total"},nt={class:"header-filters"},it={key:0,class:"project-info"},ot={class:"project-name"},at={class:"project-code"},lt={key:2,class:"progress-info"},dt={class:"progress-text"},pt={__name:"manage",setup(rt){const x=le(),y=S(()=>{const t=v.value.length,e=v.value.filter(a=>a.status==="material_reviewing").length,u=v.value.filter(a=>a.status==="material_rejected").length,w=v.value.filter(a=>a.status==="meeting_preparing").length,g=v.value.filter(a=>a.status==="meeting_scheduled").length,z=v.value.filter(a=>a.status==="opening_passed").length,R=v.value.filter(a=>a.status==="opening_conditional").length,N=v.value.filter(a=>a.status==="opening_failed").length;return{total:t,materialReviewing:e,materialRejected:u,meetingPreparing:w,meetingScheduled:g,openingPassed:z,openingConditional:R,openingFailed:N}}),_=T({status:"",keyword:""}),h=T(!1),v=T([{id:1,projectName:"智慧城市大数据平台建设项目",projectCode:"PROJ-2024-001",status:"material_rejected",submitTime:"2024-01-15",expectedTime:"2024-03-15",description:"构建城市级大数据分析平台，支持多源数据接入和实时分析",materials:[{id:1,name:"项目开题报告.pdf",type:"开题报告"},{id:2,name:"技术方案.docx",type:"技术方案"}],rejectionInfo:{time:"2024-01-18",reviewer:"张审核员",comments:"材料基本符合要求，但需要完善部分内容。",rejectionReason:"1. 项目开题报告中缺少详细的研究目标和技术路线；2. 技术方案需要补充风险分析和应对措施；3. 请提供详细的项目实施计划和时间节点。"}},{id:7,projectName:"云计算服务优化项目",projectCode:"PROJ-2024-007",status:"material_reviewing",submitTime:"2024-02-10",expectedTime:"2024-04-10",description:"云计算服务性能优化和成本控制研究",materials:[{id:9,name:"项目开题报告.pdf",type:"开题报告"}]},{id:2,projectName:"区块链供应链金融平台",projectCode:"PROJ-2024-002",status:"meeting_preparing",submitTime:"2024-01-20",expectedTime:"2024-03-20",description:"基于区块链技术的供应链金融解决方案",materials:[{id:3,name:"项目开题报告.pdf",type:"开题报告"}]},{id:3,projectName:"物联网环境监测系统",projectCode:"PROJ-2024-003",status:"meeting_scheduled",submitTime:"2024-02-01",expectedTime:"2024-04-01",description:"基于物联网技术的实时环境监测与预警系统",materials:[{id:4,name:"项目开题报告.pdf",type:"开题报告"},{id:5,name:"技术架构.pdf",type:"技术文档"}],meetingInfo:{time:"2024-02-15 14:00",location:"学术会议室A",participants:["专家A","专家B","专家C"]}},{id:4,projectName:"人工智能教育辅助平台",projectCode:"PROJ-2024-004",status:"opening_passed",submitTime:"2024-01-10",expectedTime:"2024-03-10",description:"基于AI技术的个性化教育辅助系统",materials:[{id:6,name:"项目开题报告.pdf",type:"开题报告"}],conclusion:{time:"2024-01-25",type:"opening_passed",feedback:"项目技术方案可行，预期目标明确，研究计划合理，专家组一致通过开题申请。建议在实施过程中加强用户体验设计和数据安全保护。",score:92}},{id:5,projectName:"5G网络优化项目",projectCode:"PROJ-2024-005",status:"opening_conditional",submitTime:"2024-01-25",expectedTime:"2024-03-25",description:"5G基站布局优化算法研究",materials:[{id:7,name:"项目开题报告.pdf",type:"开题报告"}],conclusion:{time:"2024-02-10",type:"opening_conditional",feedback:"项目研究方向正确，但技术路线需进一步完善。要求在3个月内补充详细的算法设计和实验方案，并重新提交审核。",requirements:"1. 补充算法的理论分析和性能评估指标；2. 提供详细的实验环境搭建方案；3. 完善项目风险评估和应对措施。"}},{id:6,projectName:"区块链电子投票系统",projectCode:"PROJ-2024-006",status:"opening_failed",submitTime:"2024-02-05",expectedTime:"2024-04-05",description:"基于区块链的安全电子投票平台",materials:[{id:8,name:"项目开题报告.pdf",type:"开题报告"}],conclusion:{time:"2024-02-20",type:"opening_failed",feedback:"项目技术方案存在重大安全隐患，研究目标与现有资源不匹配，专家组认为项目不具备实施条件，不予通过开题申请。建议重新设计技术方案后重新申请。"}}]),q=[{title:"项目信息",key:"projectInfo",width:300},{title:"状态",dataIndex:"status",key:"status",width:120},{title:"申请时间",dataIndex:"submitTime",key:"submitTime",width:120},{title:"预期时间",dataIndex:"expectedTime",key:"expectedTime",width:120},{title:"进度",key:"progress",width:200},{title:"操作",key:"actions",width:200}],O=T({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,e)=>`共 ${t} 条记录`}),F=S(()=>{let t=v.value;return _.value.status&&(t=t.filter(e=>e.status===_.value.status)),_.value.keyword&&(t=t.filter(e=>e.projectName.toLowerCase().includes(_.value.keyword.toLowerCase())||e.projectCode.toLowerCase().includes(_.value.keyword.toLowerCase()))),O.value.total=t.length,t}),J=t=>({material_reviewing:"orange",material_rejected:"red",meeting_preparing:"blue",meeting_scheduled:"cyan",opening_passed:"green",opening_conditional:"orange",opening_failed:"red"})[t]||"default",P=t=>({material_reviewing:"材料审核中",material_rejected:"材料审核未通过",meeting_preparing:"会议待组织",meeting_scheduled:"会议已安排",opening_passed:"开题通过",opening_conditional:"有条件通过",opening_failed:"开题未通过"})[t]||"未知状态",A=t=>({material_reviewing:25,material_rejected:25,meeting_preparing:50,meeting_scheduled:75,opening_passed:100,opening_conditional:100,opening_failed:100})[t]||0,D=t=>["opening_passed"].includes(t)?"success":["opening_failed","material_rejected"].includes(t)?"exception":"active",V=(t,e)=>({material_reviewing:"材料审核中",material_rejected:"材料审核未通过，需重新提交",meeting_preparing:"等待会议组织",meeting_scheduled:"会议已安排",opening_passed:"开题通过",opening_conditional:"有条件通过",opening_failed:"开题未通过"})[t]||"进行中",M=t=>{var u;const e=[];return((u=t.materials)==null?void 0:u.length)>0&&e.push({key:"viewMaterials",label:"查看材料"}),["opening_passed","opening_conditional","opening_failed"].includes(t.status)&&e.push({key:"downloadReport",label:"下载报告"}),e},B=()=>{h.value=!h.value},j=t=>{_.value.status=t},L=()=>{},E=()=>{},G=()=>{x.push("/th_qd/opening/applicant/submit")},Q=t=>{var e;x.push({path:"/opening/application/submit",query:{resubmit:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),rejectionReason:encodeURIComponent(((e=t.rejectionInfo)==null?void 0:e.rejectionReason)||"")}})},W=t=>{let e="";t.conclusion&&t.conclusion.requirements&&(e=t.conclusion.requirements),x.push({path:"/opening/application/submit",query:{improvement:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),improvementRequirements:encodeURIComponent(e)}})},K=t=>{var e;x.push({path:"/opening/application/submit",query:{resubmit:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),rejectionReason:encodeURIComponent(((e=t.rejectionInfo)==null?void 0:e.rejectionReason)||"")}})},X=t=>{t.conclusion?U.info({title:"开题结论详情",width:600,content:d("div",[d("p",`结论时间: ${t.conclusion.time}`),d("p",`结论类型: ${P(t.status)}`),d("div",[d("p","结论意见:"),d("div",{style:"background: #f5f5f5; padding: 12px; border-radius: 4px; margin-top: 8px;"},t.conclusion.feedback)]),t.conclusion.requirements&&d("div",[d("p",{style:"margin-top: 16px;"},"整改要求:"),d("div",{style:"background: #fff7e6; padding: 12px; border-radius: 4px; margin-top: 8px; border: 1px solid #ffd591;"},t.conclusion.requirements)])])}):$.info("暂无结论详情")},Y=t=>{U.info({title:"材料驳回详情",width:600,content:d("div",[d("p",`驳回时间: ${t.rejectionInfo.time}`),d("p",`审核人员: ${t.rejectionInfo.reviewer}`),d("p",`审核意见: ${t.rejectionInfo.comments}`),d("div",[d("p","驳回原因:"),d("div",{style:"background: #f5f5f5; padding: 12px; border-radius: 4px; margin-top: 8px;"},t.rejectionInfo.rejectionReason)])])})},Z=({key:t},e)=>{switch(t){case"viewMaterials":$.info("查看材料功能");break;case"downloadReport":$.info("下载报告功能");break}};return de(()=>{}),(t,e)=>{const u=r("a-button"),w=r("a-step"),g=r("a-tag"),z=r("a-steps"),R=r("a-card"),N=r("a-badge"),a=r("a-select-option"),H=r("a-select"),ee=r("a-input-search"),te=r("a-progress"),se=r("a-menu-item"),ne=r("a-menu"),ie=r("a-dropdown"),oe=r("a-space"),ae=r("a-table");return c(),I("div",we,[s("div",xe,[e[10]||(e[10]=s("div",{class:"header-content"},[s("h1",{class:"page-title"},"开题申请管理"),s("p",{class:"page-description"},"查看和管理您提交的项目开题申请")],-1)),s("div",he,[n(u,{type:"primary",onClick:G},{default:i(()=>[n(k(_e)),e[9]||(e[9]=o(" 提交新申请 ",-1))]),_:1,__:[9]})])]),s("div",Re,[s("div",Te,[s("div",{class:"stat-card pending",onClick:e[0]||(e[0]=p=>j("material_reviewing"))},[s("div",Ie,[n(k(ge))]),s("div",ze,[s("div",Ne,m(y.value.materialReviewing),1),e[11]||(e[11]=s("div",{class:"stat-label"},"材料审核中",-1))])]),s("div",{class:"stat-card material-rejected",onClick:e[1]||(e[1]=p=>j("material_rejected"))},[s("div",$e,[n(k(ve))]),s("div",Oe,[s("div",Pe,m(y.value.materialRejected),1),e[12]||(e[12]=s("div",{class:"stat-label"},"材料审核未通过",-1))])]),s("div",{class:"stat-card reviewing",onClick:e[2]||(e[2]=p=>j("meeting_preparing"))},[s("div",Me,[n(k(fe))]),s("div",Se,[s("div",Ue,m(y.value.meetingPreparing),1),e[13]||(e[13]=s("div",{class:"stat-label"},"会议待组织",-1))])]),s("div",{class:"stat-card scheduled",onClick:e[3]||(e[3]=p=>j("meeting_scheduled"))},[s("div",qe,[n(k(ke))]),s("div",Fe,[s("div",Je,m(y.value.meetingScheduled),1),e[14]||(e[14]=s("div",{class:"stat-label"},"会议已安排",-1))])]),s("div",{class:"stat-card completed",onClick:e[4]||(e[4]=p=>j("opening_passed"))},[s("div",Ae,[n(k(Ce))]),s("div",De,[s("div",Ve,m(y.value.openingPassed),1),e[15]||(e[15]=s("div",{class:"stat-label"},"开题通过",-1))])]),s("div",{class:"stat-card conditional",onClick:e[5]||(e[5]=p=>j("opening_conditional"))},[s("div",Be,[n(k(ye))]),s("div",Le,[s("div",Ee,m(y.value.openingConditional),1),e[16]||(e[16]=s("div",{class:"stat-label"},"有条件通过",-1))])]),s("div",{class:"stat-card rejected",onClick:e[6]||(e[6]=p=>j("opening_failed"))},[s("div",Ge,[n(k(je))]),s("div",Qe,[s("div",We,m(y.value.openingFailed),1),e[17]||(e[17]=s("div",{class:"stat-label"},"开题未通过",-1))])])])]),n(R,{class:"flow-description",title:"开题流程说明",bordered:!1},{extra:i(()=>[n(u,{type:"link",size:"small",onClick:B},{default:i(()=>[o(m(h.value?"收起":"展开"),1)]),_:1})]),default:i(()=>[pe(s("div",Ke,[n(z,{current:3,size:"small",direction:"horizontal",status:"finish"},{default:i(()=>[n(w,{title:"提交申请",description:"准备材料并提交开题申请",status:"finish"}),n(w,{title:"材料审核",status:"finish"},{description:i(()=>[s("div",Xe,[e[20]||(e[20]=o(" 等待管理员审核开题材料 ",-1)),s("div",Ye,[n(g,{color:"orange",size:"small"},{default:i(()=>e[18]||(e[18]=[o("材料审核中",-1)])),_:1,__:[18]}),n(g,{color:"red",size:"small"},{default:i(()=>e[19]||(e[19]=[o("材料审核未通过",-1)])),_:1,__:[19]})])])]),_:1}),n(w,{title:"组织会议",status:"finish"},{description:i(()=>[s("div",Ze,[e[23]||(e[23]=o(" 等待管理员组织开题答辩会议 ",-1)),s("div",He,[n(g,{color:"blue",size:"small"},{default:i(()=>e[21]||(e[21]=[o("会议待组织",-1)])),_:1,__:[21]}),n(g,{color:"cyan",size:"small"},{default:i(()=>e[22]||(e[22]=[o("会议已安排",-1)])),_:1,__:[22]})])])]),_:1}),n(w,{title:"开题结论",status:"finish"},{description:i(()=>[s("div",et,[e[27]||(e[27]=o(" 根据会议结果获得最终结论 ",-1)),s("div",tt,[n(g,{color:"green",size:"small"},{default:i(()=>e[24]||(e[24]=[o("开题通过",-1)])),_:1,__:[24]}),n(g,{color:"orange",size:"small"},{default:i(()=>e[25]||(e[25]=[o("有条件通过",-1)])),_:1,__:[25]}),n(g,{color:"red",size:"small"},{default:i(()=>e[26]||(e[26]=[o("开题未通过",-1)])),_:1,__:[26]})])])]),_:1})]),_:1})],512),[[re,h.value]])]),_:1}),n(R,{bordered:!1},{title:i(()=>[s("div",st,[e[28]||(e[28]=s("span",null,"我的开题申请",-1)),n(N,{count:y.value.total,"number-style":{backgroundColor:"#1890ff"}},null,8,["count"])])]),extra:i(()=>[s("div",nt,[n(H,{value:_.value.status,"onUpdate:value":e[7]||(e[7]=p=>_.value.status=p),placeholder:"筛选状态",style:{width:"150px"},onChange:L},{default:i(()=>[n(a,{value:""},{default:i(()=>e[29]||(e[29]=[o("全部状态",-1)])),_:1,__:[29]}),n(a,{value:"material_reviewing"},{default:i(()=>e[30]||(e[30]=[o("材料审核中",-1)])),_:1,__:[30]}),n(a,{value:"material_rejected"},{default:i(()=>e[31]||(e[31]=[o("材料审核未通过",-1)])),_:1,__:[31]}),n(a,{value:"meeting_preparing"},{default:i(()=>e[32]||(e[32]=[o("会议待组织",-1)])),_:1,__:[32]}),n(a,{value:"meeting_scheduled"},{default:i(()=>e[33]||(e[33]=[o("会议已安排",-1)])),_:1,__:[33]}),n(a,{value:"opening_passed"},{default:i(()=>e[34]||(e[34]=[o("开题通过",-1)])),_:1,__:[34]}),n(a,{value:"opening_conditional"},{default:i(()=>e[35]||(e[35]=[o("有条件通过",-1)])),_:1,__:[35]}),n(a,{value:"opening_failed"},{default:i(()=>e[36]||(e[36]=[o("开题未通过",-1)])),_:1,__:[36]})]),_:1},8,["value"]),n(ee,{value:_.value.keyword,"onUpdate:value":e[8]||(e[8]=p=>_.value.keyword=p),placeholder:"搜索项目名称",style:{width:"200px"},onSearch:E},null,8,["value"])])]),default:i(()=>[n(ae,{columns:q,"data-source":F.value,pagination:O.value,"row-key":"id",size:"middle"},{bodyCell:i(({column:p,record:l})=>[p.key==="projectInfo"?(c(),I("div",it,[s("div",ot,m(l.projectName),1),s("div",at,m(l.projectCode),1)])):p.key==="status"?(c(),C(g,{key:1,color:J(l.status)},{default:i(()=>[o(m(P(l.status)),1)]),_:2},1032,["color"])):p.key==="progress"?(c(),I("div",lt,[n(te,{percent:A(l.status),size:"small",status:D(l.status)},null,8,["percent","status"]),s("div",dt,m(V(l.status,l)),1)])):p.key==="actions"?(c(),C(oe,{key:3},{default:i(()=>[l.status==="material_rejected"?(c(),C(u,{key:0,type:"primary",size:"small",onClick:f=>Q(l)},{default:i(()=>e[37]||(e[37]=[o(" 重新提交材料 ",-1)])),_:2,__:[37]},1032,["onClick"])):b("",!0),l.status==="opening_conditional"?(c(),C(u,{key:1,type:"primary",size:"small",onClick:f=>W(l)},{default:i(()=>e[38]||(e[38]=[o(" 提交整改材料 ",-1)])),_:2,__:[38]},1032,["onClick"])):b("",!0),l.status==="opening_failed"?(c(),C(u,{key:2,type:"primary",size:"small",onClick:f=>K(l)},{default:i(()=>e[39]||(e[39]=[o(" 重新提交申请 ",-1)])),_:2,__:[39]},1032,["onClick"])):b("",!0),l.status==="material_rejected"?(c(),C(u,{key:3,size:"small",onClick:f=>Y(l)},{default:i(()=>e[40]||(e[40]=[o(" 查看驳回原因 ",-1)])),_:2,__:[40]},1032,["onClick"])):b("",!0),["opening_passed","opening_conditional","opening_failed"].includes(l.status)?(c(),C(u,{key:4,size:"small",onClick:f=>X(l)},{default:i(()=>e[41]||(e[41]=[o(" 查看详情 ",-1)])),_:2,__:[41]},1032,["onClick"])):b("",!0),M(l).length>0?(c(),C(ie,{key:5},{overlay:i(()=>[n(ne,{onClick:f=>Z(f,l)},{default:i(()=>[(c(!0),I(ue,null,ce(M(l),f=>(c(),C(se,{key:f.key},{default:i(()=>[o(m(f.label),1)]),_:2},1024))),128))]),_:2},1032,["onClick"])]),default:i(()=>[n(u,{type:"link",size:"small"},{default:i(()=>[e[42]||(e[42]=o(" 更多 ",-1)),n(k(be))]),_:1,__:[42]})]),_:2},1024)):b("",!0)]),_:2},1024)):b("",!0)]),_:1},8,["data-source","pagination"])]),_:1})])}}},_t=me(pt,[["__scopeId","data-v-f003013c"]]);export{_t as default};
