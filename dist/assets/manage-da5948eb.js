import{a4 as se,c as S,f as I,o as ie,S as r,U as c,V as $,W as s,k as i,X as a,u as y,Z as m,G as n,m as ae,A as ne,_ as b,a0 as w,l as f}from"./vendor-9e962977.js";import{_ as oe}from"./index-b9d63c8b.js";import{K as le,F as de,r as re,v as me,f as pe,z as ue,Q as ce,W as _e,m as q}from"./antd-3abeaf7b.js";const ve={class:"applicant-manage-container"},fe={class:"page-header"},ge={class:"header-actions"},Ce={class:"stats-overview"},ke={class:"stats-flex-container"},ye={class:"stat-icon"},be={class:"stat-content"},je={class:"stat-number"},we={class:"stat-icon"},xe={class:"stat-content"},he={class:"stat-number"},Re={class:"stat-icon"},Te={class:"stat-content"},Ie={class:"stat-number"},ze={class:"stat-icon"},Ne={class:"stat-content"},$e={class:"stat-number"},Oe={class:"stat-icon"},Pe={class:"stat-content"},Se={class:"stat-number"},qe={class:"stat-icon"},Ue={class:"stat-content"},Me={class:"stat-number"},Ve={class:"stat-icon"},Fe={class:"stat-content"},Je={class:"stat-number"},Be={class:"flow-content"},De={class:"step-description"},Ae={class:"step-status-tags"},Le={class:"step-description"},Ee={class:"step-status-tags"},Ge={class:"step-description"},Qe={class:"step-status-tags"},We={class:"card-title-with-total"},Ke={class:"header-filters"},Xe={key:0,class:"project-info"},Ze={class:"project-name"},He={class:"project-code"},Ye={key:2,class:"progress-info"},et={class:"progress-text"},tt={__name:"manage",setup(st){const h=se(),g=S(()=>{const t=_.value.length,e=_.value.filter(l=>l.status==="material_reviewing").length,p=_.value.filter(l=>l.status==="material_rejected").length,z=_.value.filter(l=>l.status==="meeting_preparing").length,j=_.value.filter(l=>l.status==="meeting_scheduled").length,v=_.value.filter(l=>l.status==="midterm_passed").length,N=_.value.filter(l=>l.status==="midterm_conditional").length,T=_.value.filter(l=>l.status==="midterm_failed").length;return{total:t,materialReviewing:e,materialRejected:p,meetingPreparing:z,meetingScheduled:j,midtermPassed:v,midtermConditional:N,midtermFailed:T}}),u=I({status:"",keyword:""}),R=I(!1),_=I([{id:1,projectName:"智慧城市大数据平台建设项目",projectCode:"PROJ-2024-001",status:"material_reviewing",submitTime:"2024-01-15",expectedTime:"2024-03-15",description:"构建城市级大数据分析平台，支持多源数据接入和实时分析",materials:[{id:1,name:"项目中期报告.pdf",type:"中期报告"},{id:2,name:"技术方案.docx",type:"技术方案"}],materialRejected:!0,rejectionInfo:{time:"2024-01-18",reviewer:"张审核员",comments:"材料基本符合要求，但需要完善部分内容。请提供详细的项目实施计划和时间节点。",rejectionReason:"1. 项目中期报告中缺少详细的研究目标和技术路线；2. 技术方案需要补充风险分析和应对措施。请提供详细的项目实施计划和时间节点。"}},{id:2,projectName:"区块链供应链金融平台",projectCode:"PROJ-2024-002",status:"meeting_preparing",submitTime:"2024-01-20",expectedTime:"2024-03-20",description:"基于区块链技术的供应链金融解决方案",materials:[{id:3,name:"项目中期报告.pdf",type:"中期报告"}]},{id:3,projectName:"物联网环境监测系统",projectCode:"PROJ-2024-003",status:"meeting_scheduled",submitTime:"2024-02-01",expectedTime:"2024-04-01",description:"基于物联网技术的实时环境监测与预警系统",materials:[{id:4,name:"项目中期报告.pdf",type:"中期报告"},{id:5,name:"技术框架.pdf",type:"技术文档"}],meetingInfo:{time:"2024-02-15 14:00",location:"学术会议室A",participants:["专家A","专家B","专家C"]}},{id:4,projectName:"人工智能教育辅助平台",projectCode:"PROJ-2024-004",status:"midterm_passed",submitTime:"2024-01-10",expectedTime:"2024-03-10",description:"基于AI技术的个性化教育辅助系统",materials:[{id:6,name:"项目中期报告.pdf",type:"中期报告"}],conclusion:{time:"2024-01-25",type:"midterm_passed",feedback:"项目技术方案可行，预期目标明确，研究计划合理，专家组一致通过中期申请。建议在实施过程中加强用户体验设计和数据安全保护。",score:92}},{id:5,projectName:"5G网络优化项目",projectCode:"PROJ-2024-005",status:"midterm_conditional",submitTime:"2024-01-25",expectedTime:"2024-03-25",description:"5G基站布局优化算法研究",materials:[{id:7,name:"项目中期报告.pdf",type:"中期报告"}],conclusion:{time:"2024-02-10",type:"midterm_conditional",feedback:"项目研究方向正确，但技术路线需进一步完善。要求在3个月内补充详细的算法设计和实验方案，并重新提交审核。",requirements:"1. 补充算法的理论分析和性能评估指标。提供详细的实验环境搭建方案；3. 完善项目风险评估和应对措施。"}},{id:6,projectName:"区块链电子投票系统",projectCode:"PROJ-2024-006",status:"midterm_failed",submitTime:"2024-02-05",expectedTime:"2024-04-05",description:"基于区块链的安全电子投票平台",materials:[{id:8,name:"项目中期报告.pdf",type:"中期报告"}],conclusion:{time:"2024-02-20",type:"midterm_failed",feedback:"项目技术方案存在重大安全隐患，研究目标与现有资源不匹配，专家组认为项目不具备实施条件，不予通过中期申请。建议重新设计技术方案后重新申请。",requirements:"1. 重新设计技术方案后重新申请。"}}]),U=[{title:"项目信息",key:"projectInfo",width:300},{title:"状态",dataIndex:"status",key:"status",width:120},{title:"申请时间",dataIndex:"submitTime",key:"submitTime",width:120},{title:"预期时间",dataIndex:"expectedTime",key:"expectedTime",width:120},{title:"进度",key:"progress",width:200},{title:"操作",key:"actions",width:200}],O=I({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,e)=>`共 ${t} 条记录`}),M=S(()=>{let t=_.value;return u.value.status&&(t=t.filter(e=>e.status===u.value.status)),u.value.keyword&&(t=t.filter(e=>e.projectName.toLowerCase().includes(u.value.keyword.toLowerCase())||e.projectCode.toLowerCase().includes(u.value.keyword.toLowerCase()))),O.value.total=t.length,t}),V=t=>({material_reviewing:"orange",meeting_preparing:"blue",meeting_scheduled:"cyan",midterm_passed:"green",midterm_conditional:"orange",midterm_failed:"red"})[t]||"default",P=t=>({material_reviewing:"材料审核中",meeting_preparing:"会议待组织",meeting_scheduled:"会议已安排",midterm_passed:"中期通过",midterm_conditional:"有条件通过",midterm_failed:"中期未通过"})[t]||"未知状态",F=t=>({material_reviewing:25,meeting_preparing:50,meeting_scheduled:75,midterm_passed:100,midterm_conditional:100,midterm_failed:100})[t]||0,J=t=>["midterm_passed"].includes(t)?"success":["midterm_failed"].includes(t)?"exception":"active",B=(t,e)=>({material_reviewing:e.materialRejected?"材料被驳回，需重新提交":"材料审核中",meeting_preparing:"等待会议组织",meeting_scheduled:"会议已安排",midterm_passed:"中期通过",midterm_conditional:"有条件通过",midterm_failed:"中期未通过"})[t]||"进行中",D=()=>{R.value=!R.value},C=t=>{u.value.status=t},A=()=>{},L=()=>{},E=()=>{h.push("/th_qd/midterm/applicant/submit")},G=t=>{var e;h.push({path:"/midterm/application/submit",query:{resubmit:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),rejectionReason:encodeURIComponent(((e=t.rejectionInfo)==null?void 0:e.rejectionReason)||"")}})},Q=t=>{let e="";t.conclusion&&t.conclusion.requirements&&(e=t.conclusion.requirements),h.push({path:"/midterm/application/submit",query:{improvement:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),improvementRequirements:encodeURIComponent(e)}})},W=t=>{var e;h.push({path:"/midterm/application/submit",query:{resubmit:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),rejectionReason:encodeURIComponent(((e=t.rejectionInfo)==null?void 0:e.rejectionReason)||"")}})},K=t=>{t.conclusion?_e.info({title:"中期结论详情",width:600,content:f("div",[f("p",`结论时间: ${t.conclusion.time}`),f("p",`结论类型: ${P(t.status)}`),f("div",[f("p","结论意见:"),f("div",{style:"background: #f5f5f5; padding: 12px; border-radius: 4px; margin-top: 8px;"},t.conclusion.feedback)]),t.conclusion.requirements&&f("div",[f("p",{style:"margin-top: 16px;"},"整改要求:"),f("div",{style:"background: #fff7e6; padding: 12px; border-radius: 4px; margin-top: 8px; border: 1px solid #ffd591;"},t.conclusion.requirements)])])}):q.info("暂无结论详情")},X=t=>{q.info("查看记录详情功能")};return ie(()=>{}),(t,e)=>{const p=r("a-button"),z=r("ExclamationCircleOutlined"),j=r("a-step"),v=r("a-tag"),N=r("a-steps"),T=r("a-card"),l=r("a-badge"),k=r("a-select-option"),Z=r("a-select"),H=r("a-input-search"),Y=r("a-progress"),ee=r("a-space"),te=r("a-table");return c(),$("div",ve,[s("div",fe,[e[10]||(e[10]=s("div",{class:"header-content"},[s("h1",{class:"page-title"},"中期申请管理"),s("p",{class:"page-description"},"查看和管理您提交的项目中期申请")],-1)),s("div",ge,[i(p,{type:"primary",onClick:E},{default:a(()=>[i(y(le)),e[9]||(e[9]=n(" 提交新申请 ",-1))]),_:1,__:[9]})])]),s("div",Ce,[s("div",ke,[s("div",{class:"stat-card pending",onClick:e[0]||(e[0]=d=>C("material_reviewing"))},[s("div",ye,[i(y(de))]),s("div",be,[s("div",je,m(g.value.materialReviewing),1),e[11]||(e[11]=s("div",{class:"stat-label"},"材料审核中",-1))])]),s("div",{class:"stat-card material-rejected",onClick:e[1]||(e[1]=d=>C("material_rejected"))},[s("div",we,[i(z)]),s("div",xe,[s("div",he,m(g.value.materialRejected),1),e[12]||(e[12]=s("div",{class:"stat-label"},"材料审核未通过",-1))])]),s("div",{class:"stat-card reviewing",onClick:e[2]||(e[2]=d=>C("meeting_preparing"))},[s("div",Re,[i(y(re))]),s("div",Te,[s("div",Ie,m(g.value.meetingPreparing),1),e[13]||(e[13]=s("div",{class:"stat-label"},"会议待组织",-1))])]),s("div",{class:"stat-card scheduled",onClick:e[3]||(e[3]=d=>C("meeting_scheduled"))},[s("div",ze,[i(y(me))]),s("div",Ne,[s("div",$e,m(g.value.meetingScheduled),1),e[14]||(e[14]=s("div",{class:"stat-label"},"会议已安排",-1))])]),s("div",{class:"stat-card completed",onClick:e[4]||(e[4]=d=>C("midterm_passed"))},[s("div",Oe,[i(y(pe))]),s("div",Pe,[s("div",Se,m(g.value.midtermPassed),1),e[15]||(e[15]=s("div",{class:"stat-label"},"中期通过",-1))])]),s("div",{class:"stat-card conditional",onClick:e[5]||(e[5]=d=>C("midterm_conditional"))},[s("div",qe,[i(y(ue))]),s("div",Ue,[s("div",Me,m(g.value.midtermConditional),1),e[16]||(e[16]=s("div",{class:"stat-label"},"有条件通过",-1))])]),s("div",{class:"stat-card rejected",onClick:e[6]||(e[6]=d=>C("midterm_failed"))},[s("div",Ve,[i(y(ce))]),s("div",Fe,[s("div",Je,m(g.value.midtermFailed),1),e[17]||(e[17]=s("div",{class:"stat-label"},"中期未通过",-1))])])])]),i(T,{class:"flow-description",title:"中期检查流程说明",bordered:!1},{extra:a(()=>[i(p,{type:"link",size:"small",onClick:D},{default:a(()=>[n(m(R.value?"收起":"展开"),1)]),_:1})]),default:a(()=>[ae(s("div",Be,[i(N,{current:3,size:"small",direction:"horizontal",status:"finish"},{default:a(()=>[i(j,{title:"提交申请",description:"准备材料并提交中期申请",status:"finish"}),i(j,{title:"材料审核",status:"finish"},{description:a(()=>[s("div",De,[e[19]||(e[19]=n(" 等待管理员审核中期材料 ",-1)),s("div",Ae,[i(v,{color:"orange",size:"small"},{default:a(()=>e[18]||(e[18]=[n("材料审核中",-1)])),_:1,__:[18]})])])]),_:1}),i(j,{title:"组织会议",status:"finish"},{description:a(()=>[s("div",Le,[e[22]||(e[22]=n(" 等待管理员组织中期检查会议 ",-1)),s("div",Ee,[i(v,{color:"blue",size:"small"},{default:a(()=>e[20]||(e[20]=[n("会议待组织",-1)])),_:1,__:[20]}),i(v,{color:"cyan",size:"small"},{default:a(()=>e[21]||(e[21]=[n("会议已安排",-1)])),_:1,__:[21]})])])]),_:1}),i(j,{title:"中期结论",status:"finish"},{description:a(()=>[s("div",Ge,[e[26]||(e[26]=n(" 根据会议结果获得最终结论 ",-1)),s("div",Qe,[i(v,{color:"green",size:"small"},{default:a(()=>e[23]||(e[23]=[n("中期通过",-1)])),_:1,__:[23]}),i(v,{color:"orange",size:"small"},{default:a(()=>e[24]||(e[24]=[n("有条件通过",-1)])),_:1,__:[24]}),i(v,{color:"red",size:"small"},{default:a(()=>e[25]||(e[25]=[n("中期未通过",-1)])),_:1,__:[25]})])])]),_:1})]),_:1})],512),[[ne,R.value]])]),_:1}),i(T,{bordered:!1},{title:a(()=>[s("div",We,[e[27]||(e[27]=s("span",null,"我的中期申请",-1)),i(l,{count:g.value.total,"number-style":{backgroundColor:"#1890ff"}},null,8,["count"])])]),extra:a(()=>[s("div",Ke,[i(Z,{value:u.value.status,"onUpdate:value":e[7]||(e[7]=d=>u.value.status=d),placeholder:"筛选状态",style:{width:"150px"},onChange:A},{default:a(()=>[i(k,{value:""},{default:a(()=>e[28]||(e[28]=[n("全部状态",-1)])),_:1,__:[28]}),i(k,{value:"material_reviewing"},{default:a(()=>e[29]||(e[29]=[n("材料审核中",-1)])),_:1,__:[29]}),i(k,{value:"meeting_preparing"},{default:a(()=>e[30]||(e[30]=[n("会议待组织",-1)])),_:1,__:[30]}),i(k,{value:"meeting_scheduled"},{default:a(()=>e[31]||(e[31]=[n("会议已安排",-1)])),_:1,__:[31]}),i(k,{value:"midterm_passed"},{default:a(()=>e[32]||(e[32]=[n("中期通过",-1)])),_:1,__:[32]}),i(k,{value:"midterm_conditional"},{default:a(()=>e[33]||(e[33]=[n("有条件通过",-1)])),_:1,__:[33]}),i(k,{value:"midterm_failed"},{default:a(()=>e[34]||(e[34]=[n("中期未通过",-1)])),_:1,__:[34]})]),_:1},8,["value"]),i(H,{value:u.value.keyword,"onUpdate:value":e[8]||(e[8]=d=>u.value.keyword=d),placeholder:"搜索项目名称",style:{width:"200px"},onSearch:L},null,8,["value"])])]),default:a(()=>[i(te,{columns:U,"data-source":M.value,pagination:O.value,"row-key":"id",size:"middle"},{bodyCell:a(({column:d,record:o})=>[d.key==="projectInfo"?(c(),$("div",Xe,[s("div",Ze,m(o.projectName),1),s("div",He,m(o.projectCode),1)])):d.key==="status"?(c(),b(v,{key:1,color:V(o.status)},{default:a(()=>[n(m(P(o.status)),1)]),_:2},1032,["color"])):d.key==="progress"?(c(),$("div",Ye,[i(Y,{percent:F(o.status),size:"small",status:J(o.status)},null,8,["percent","status"]),s("div",et,m(B(o.status,o)),1)])):d.key==="actions"?(c(),b(ee,{key:3},{default:a(()=>[o.status==="material_rejected"?(c(),b(p,{key:0,type:"primary",size:"small",onClick:x=>G(o)},{default:a(()=>e[35]||(e[35]=[n(" 重新提交材料 ",-1)])),_:2,__:[35]},1032,["onClick"])):w("",!0),o.status==="midterm_conditional"?(c(),b(p,{key:1,type:"primary",size:"small",onClick:x=>Q(o)},{default:a(()=>e[36]||(e[36]=[n(" 提交整改 ",-1)])),_:2,__:[36]},1032,["onClick"])):w("",!0),o.status==="midterm_failed"?(c(),b(p,{key:2,type:"primary",size:"small",onClick:x=>W(o)},{default:a(()=>e[37]||(e[37]=[n(" 重新申请 ",-1)])),_:2,__:[37]},1032,["onClick"])):w("",!0),o.status==="material_rejected"?(c(),b(p,{key:3,size:"small",onClick:x=>t.handleViewRejectionDetails(o)},{default:a(()=>e[38]||(e[38]=[n(" 查看驳回原因 ",-1)])),_:2,__:[38]},1032,["onClick"])):w("",!0),["midterm_passed","midterm_conditional","midterm_failed"].includes(o.status)?(c(),b(p,{key:4,size:"small",onClick:x=>K(o)},{default:a(()=>e[39]||(e[39]=[n(" 查看结论 ",-1)])),_:2,__:[39]},1032,["onClick"])):w("",!0),i(p,{size:"small",onClick:x=>X(o)},{default:a(()=>e[40]||(e[40]=[n(" 查看详情 ",-1)])),_:2,__:[40]},1032,["onClick"])]),_:2},1024)):w("",!0)]),_:1},8,["data-source","pagination"])]),_:1})])}}},ot=oe(tt,[["__scopeId","data-v-55c4f27c"]]);export{ot as default};
